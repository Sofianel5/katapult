{% extends "main/layout.html" %}
{% load static %}
{% block title %}Your ad campaign{% endblock %}
{% block main %}
<div class="full-width center-row-flex">
  <div class="pg-title" style="margin-bottom: 4vh;">
    Your data driven advertisement plan
  </div>
</div>
<div class="space-evenly-row-flex">
    <div class="column-start-flex">
        <div class="hunned-width center-row-flex">
            <div class="infotitle" style="margin-top: 4vh; width:40vw;">
                {% load humanize %}
                Based off of your budget of ${{ budget|floatformat:2|intcomma }}, we identified the best{% if matches|length != 1 %} adspaces{% else %} adspace{% endif %} for you using our machine learning technology.
            </div>
        </div>
        <div class="gridcontainer">
            {% for match in matches %}
            <div class="start-row-flex">
                <div class="column-start-flex">
                        <img src="{{ match.image.url }}" class="showcase-img">
                </div>
                <div class="column-start-flex">
                    <div class="section-title">
                        {{ match.title }}
                    </div>
                    <div class="section-title">
                        {{ match.description }}
                    </div>
                    <div class="section-title">
                        {{ match.address }}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <div style="width: 30vw; height: 100vh">
        <div style="position: fixed; width: 30vw; height: 80vh; bottom: 20;right: 20;">
            <div class="mapholder" id="map" style="width: 30vw; height: 80vh;">

            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block bottomScripts %}
<script>
    function initMap() {
        center = {{ coordinates.0|safe }}
        map = new google.maps.Map(document.getElementById('map'), {
        center: center,
        zoom: 10
        });
        {% for coordinate in coordinates %}
        var marker{{ forloop.counter0 }} = new google.maps.Marker({
            position: {{ coordinate| safe |escape }},
            map: map,
        });
        {% endfor %}
    }
</script>
<script defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDWPqLxyV5wfu5STwy70HY0Dx9cL4KXV7I&callback=initMap">
</script>
{% endblock %}
