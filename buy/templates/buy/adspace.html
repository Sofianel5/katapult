{% extends "main/layout.html" %}
{% load static %}
{% block title %}Browse Ad Spaces{% endblock %}
{% block main %}
<div class="space-evenly-row-flex viewcontainer">

  <!-- Left Column / Headphones Image -->
  <div class="column-center-flex left-column">
    <div onclick="location.replace('/buy/')">Back</div>
    <img data-image="red" class="active" src="{{ adspace.image.url }}" alt="">
  </div>


  <!-- Right Column -->
  <div class="right-column">

    <!-- Product Description -->
    <div class="product-description">
      <span>{{ adspace.city }}</span>
      <h1>{{ adspace.title }}</h1>
      <p>{{ adspace.address }}</p>
      <p>{{ adspace.width }}ft by {{ adspace.height }}ft</p>
      <p>Minimum term length: {{ adspace.get_term_length_display }}</p>
    </div>

    <!-- Product Pricing -->
    <div class="product-price">
      {% load humanize %}
      <span>${{ adspace.price_per_day|floatformat:2|intcomma }}/day</span>
      <a href="{% url 'reserve' pk=adspace.id %}" class="cart-btn">Reserve</a>
    </div>
    <p>{{ adspace.description }}</p>
  </div>
</div>
<div class="full-width center-row-flex" style="height: 50vh">

            <div class="mapholder" id="map" style="height: 50vh; width: 60vw;">

            </div>
  </div>
<script>
$(document).ready(function() {

  $('.color-choose input').on('click', function() {
      var type = $(this).attr('data-image');

      $('.active').removeClass('active');
      $('.left-column img[data-image = ' + type + ']').addClass('active');
      $(this).addClass('active');
  });

});
var regIcon;
    var largeIcon;
    var markers = {};
    function initMap() {
        center = {{ coordinates.coordinates |safe }}
        map = new google.maps.Map(document.getElementById('map'), {
        center: center,
        zoom: 10
        });
        regIcon = {
            url: "https://maps.google.com/mapfiles/ms/micons/blue.png",
            scaledSize: new google.maps.Size(32, 32)
        };
        largeIcon = {
            url: "https://maps.google.com/mapfiles/ms/micons/blue.png",
            scaledSize: new google.maps.Size(48, 48)
        };
        var marker = new google.maps.Marker({
            position: {{ coordinates.coordinates | safe |escape }},
            map: map,
            icon: regIcon,
        });
        markers['{{ adspace.pk }}'] = marker
    }
    function highlightMarker(id) {
        console.log("highlighting " +id)
        marker = markers[id]
        marker.setIcon(largeIcon)
    }
    function unhighlightMarker(id) {
        console.log("unhighlighting "+id)
        marker = markers[id]
        marker.setIcon(regIcon)
    }
</script>
<script defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDWPqLxyV5wfu5STwy70HY0Dx9cL4KXV7I&callback=initMap">
</script>
{% endblock %}
